<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>World of Aetherlyn</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;600;800&display=swap" rel="stylesheet">

<!-- modular CSS -->
<link rel="stylesheet" href="modules/theme.css">
<link rel="stylesheet" href="modules/layout.css">
<link rel="stylesheet" href="modules/navbar.css">
<link rel="stylesheet" href="modules/hero.css">
<link rel="stylesheet" href="modules/components.css">
<link rel="stylesheet" href="modules/mobile.css">
<link rel="stylesheet" href="modules/particles.css">
<link rel="stylesheet" href="modules/transition.css">
<style>
  :root{
    --blood-red:#5e1914;
    --gold:#d4af37;
    --parchment:#f0e6d2;
    --dark-brown:#3a2c1a;
    --muted:#8a6a4d;
    --max-width:1200px;
  }

  /* Basic reset */
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Playfair Display', serif;
    background:var(--parchment);
    color:var(--dark-brown);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow-x:hidden;
  }

  /* Background layers */
  #particles-canvas{position:fixed;inset:0;width:100%;height:100%;z-index:0;pointer-events:none}
  .hero-bg{
    position:fixed;inset:0;
    background-image:
      linear-gradient(180deg, rgba(9,6,3,0.15), rgba(9,6,3,0.35)),
      url('hero-img.png');
    background-size:cover;background-position:center;
    filter:contrast(0.98) saturate(0.98);
    transform:scale(1.01);
    z-index:1;
  }
  .hero-bg::after{content:'';position:absolute;inset:0;
    background:linear-gradient(180deg, rgba(255,240,220,0.03), rgba(0,0,0,0.28));}

    html {
  scroll-behavior: smooth;
}

  /* ========== FIXED NAVBAR ========== */
header {
  position: sticky;
  top: 0;
  z-index: 1000;
  background-color: var(--blood-red); /* solid color */
}
  
  .nav-container {
    background-color: var(--blood-red);
    position: relative;
    z-index: 1001;
  }
  
  nav {
    position: relative;
    z-index: 1001;
    background-color: rgba(94, 25, 20, 0.98);
    backdrop-filter: blur(5px);
  }

  nav .nav-inner {
  max-width: var(--max-width);
  margin: 0 auto;
}

  .nav-list {
  display: flex;
  justify-content: center; /* center menu items horizontally */
  list-style: none;
  margin: 0;
  padding: 0;
}


  .nav-item {
    position: relative;
  }

  .nav-link {
    display: block;
    padding: 15px 20px;
    color: var(--parchment);
    text-decoration: none;
    font-family: 'Cinzel', serif;
    transition: all 0.3s ease;
  }

  .nav-link:hover {
    background-color: var(--gold);
    color: var(--dark-brown);
  }

  /* DROPDOWN FIXES */
  .dropdown {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background-color: rgba(58, 44, 26, 0.98);
    min-width: 200px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    border-top: 2px solid var(--gold);
    z-index: 1002;
    animation: fadeIn 0.3s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .dropdown li {
    position: relative;
  }

  .dropdown li a {
    display: block;
    padding: 12px 15px;
    color: var(--parchment);
    text-decoration: none;
    transition: all 0.2s ease;
    border-left: 3px solid transparent;
  }

  .dropdown li a:hover {
    background-color: var(--gold);
    color: var(--dark-brown);
    border-left-color: var(--blood-red);
    padding-left: 20px;
  }

  .nav-item:hover .dropdown {
    display: block;
  }

  /* Hero content fixes */
  main {
    position: relative;
    z-index: 2;
  }

  .hero-text {
    position: relative;
    z-index: 3;
  }

  /* ========== REST OF YOUR STYLES ========== */
  .topbar {
  max-width: var(--max-width);
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 18px;
  gap: 12px;
}
  .brand{display:flex;align-items:center;gap:14px}
  .logo{width:64px;height:64px;border-radius:10px;background:linear-gradient(135deg,var(--gold),var(--blood-red));display:grid;place-items:center;box-shadow:0 10px 30px rgba(94,25,20,0.25)}
  .site-title{font-family:'Cinzel', serif;font-size:clamp(18px,2.6vw,26px);color:var(--parchment)}
  .site-sub{font-size:12px;color:var(--gold)}

  /* Hero content */
  main{position:relative;z-index:200;max-width:var(--max-width);margin:0 auto;padding:80px 18px 40px}
  .hero-top{display:flex;align-items:flex-start;justify-content:space-between;gap:20px;flex-wrap:wrap}
  .hero-left{max-width:720px}
  .hero-title{font-family:'Cinzel';font-size:clamp(28px,6vw,56px);color:var(--parchment);text-shadow:0 8px 30px rgba(0,0,0,0.55);line-height:1.02}
  .hero-sub{color:rgba(255,238,210,0.95);font-size:clamp(14px,2.6vw,18px);margin-top:10px}
  .hero-actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:18px}

  .cta{display:inline-block;padding:12px 20px;border-radius:999px;background:linear-gradient(90deg,var(--blood-red),#7b2a21);color:var(--parchment);font-weight:800;position:relative;overflow:hidden;border:1px solid rgba(255,255,255,0.06)}
  .cta.secondary{background:transparent;border:1px solid rgba(255,255,255,0.08);color:var(--parchment)}

  /* Quick patch preview */
  .section{max-width:var(--max-width);margin:22px auto;padding:0 18px}
  .cards{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:14px}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.92));border-radius:12px;padding:14px;border:1px solid rgba(58,44,26,0.06);box-shadow:0 8px 24px rgba(0,0,0,0.06);display:flex;flex-direction:column;gap:10px;transition:transform .26s ease,box-shadow .26s ease}
  .card:hover{transform:translateY(-6px);box-shadow:0 18px 48px rgba(0,0,0,0.14)}
  .card .meta{display:flex;align-items:center;gap:12px}
  .card .icon{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--gold),var(--blood-red));display:grid;place-items:center;color:var(--parchment);font-weight:800}
  .card h4{font-family:'Cinzel';font-size:16px}
  .card p{color:var(--muted);font-size:14px}

  /* Rules and guilds */
  .rules-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:12px}
  .rule{padding:14px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.92));border:1px solid rgba(58,44,26,0.06)}
  .guilds{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-top:12px}
  .guild{padding:12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.92));text-align:center;border:1px solid rgba(58,44,26,0.06);cursor:pointer}
  .guild img{width:64px;height:64px;border-radius:12px;margin-bottom:8px}

  /* Map teaser */
  .map-teaser{margin-top:14px;border-radius:12px;overflow:hidden;border:1px solid rgba(58,44,26,0.06);position:relative}
  .map-teaser img{width:100%;height:auto;display:block}
  .map-overlay{position:absolute;bottom:8px;left:12px;padding:8px 12px;border-radius:8px;background:linear-gradient(90deg, rgba(0,0,0,0.2), rgba(0,0,0,0.45));color:var(--parchment);font-weight:700}

  footer{max-width:var(--max-width);margin:28px auto;padding:18px;text-align:center;color:var(--muted)}

  /* Tambahkan ini di bagian mobile CSS */
.mobile-item {
  background: transparent;
  padding: 14px;
  border-radius: 10px;
  font-weight: 800;
  font-size: 18px;
  border: 1px solid rgba(255,255,255,0.04);
  color: var(--parchment);
  text-decoration: none;
  text-align: left;
  display: block;
  width: 100%;
  transition: all 0.2s ease;
}

.mobile-item:hover {
  background: rgba(255,255,255,0.05);
  border-color: rgba(255,255,255,0.08);
}

/* Untuk item yang memiliki dropdown */
.mobile-item[data-target] {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

  /* Responsive */
  @media(max-width:1000px){ .cards{grid-template-columns:repeat(2,1fr)} .guilds{grid-template-columns:repeat(2,1fr)} }
  @media(max-width:720px){
    .cards{grid-template-columns:1fr}
    .rules-grid{grid-template-columns:1fr}
    .nav-list{display:none}
    .hero{padding:60px 14px 30px}
    .hero-title{font-size:clamp(24px,8vw,38px)}
  }

  /* Sembunyiin burger di desktop */
@media (min-width: 721px) {
  #openOverlay {
    display: none !important;
  }
}

  @media (prefers-reduced-motion: reduce){*{transition:none!important;animation:none!important}}
</style>
</head>
<body>

  <!-- Particles (subtle gold motes) -->
  <canvas id="particles-canvas" aria-hidden="true"></canvas>

  <!-- Hero background (dawn image) -->
  <div class="hero-bg" aria-hidden="true"></div>

  <!-- Header -->
  <header>
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden>
          <!-- simple heraldic svg -->
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none"><path d="M12 2L15.5 8H8.5L12 2Z" fill="white"/><path d="M5 9H19L12 22L5 9Z" fill="rgba(0,0,0,0.08)"/></svg>
        </div>
        <div>
          <a href="index.html" class="site-title">World of Aetherlyn</a>
          <div class="site-sub">Where Legends Rise and Kingdoms Fall</div>
        </div>
      </div>

      <div style="display:flex;align-items:center;gap:10px">
        <button id="openOverlay" class="menu-toggle" aria-label="Open menu" style="background:none;border:1px solid rgba(255,255,255,0.06);padding:10px;border-radius:8px;color:var(--parchment);font-size:18px">â˜°</button>
  
        <a href="https://chat.whatsapp.com/GhkuUozCaeTG4PCfFFXwSo?mode=ac_t" target="_blank" rel="noopener noreferrer" class="cta" id="enterBtn">Enter the Realm</a>
      </div>
    </div>

    <nav>
      <div class="nav-inner">
        <ul class="nav-list" id="navList">
          <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
          <li class="nav-item">
  <a class="nav-link" href="patch.html">Patch â–¾</a>
  <ul class="dropdown">
    <li><a href="patch.html#race">Race</a></li>
    <li><a href="patch.html#element">Element</a></li>
    <li><a href="patch.html#class">Class</a></li>
    <li><a href="patch.html#skills">Skills</a></li>
    <li><a href="patch.html#level">Level</a></li>
    <li><a href="patch.html#stats">Stats</a></li>
    <li><a href="patch.html#rank">Rank</a></li>
    <li><a href="patch.html#job">Job</a></li>
  </ul>
</li>
          <li class="nav-item">
            <a class="nav-link">Roleplay â–¾</a>
            <ul class="dropdown">
              <li><a href="#">RPB</a></li>
              <li><a href="#">RPL</a></li>
              <li><a href="#">RPR</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link">Rules â–¾</a>
            <ul class="dropdown">
              <li><a href="#">General Rules</a></li>
              <li><a href="#">OOC Rules</a></li>
              <li><a href="#">RPB Rules</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link">Guild â–¾</a>
            <ul class="dropdown">
              <li><a href="#">GoN</a></li>
              <li><a href="#">Zenith</a></li>
              <li><a href="#">Shadow Garden</a></li>
              <li><a href="#">Eclipse Luz</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link">Map â–¾</a>
            <ul class="dropdown">
              <li><a href="#">World Map</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </nav>
  </header>

  <!-- Mobile overlay -->
  <div class="mobile-overlay" id="mobileOverlay" aria-hidden="true">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <div style="display:flex;align-items:center;gap:12px">
        <div class="logo" style="width:48px;height:48px"></div>
        <div>
          <a href="index.html" class="site-title" style="font-size:18px">World of Aetherlyn</a>
          <div class="site-sub">Where Legends Rise and Kingdoms Fall</div>
        </div>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <button id="overlayClose" class="cta" style="background:transparent;border:1px solid rgba(255,255,255,0.08);color:var(--parchment)">Close</button>
      </div>
    </div>

    <nav class="mobile-menu" aria-label="Mobile menu">
      <div class="mobile-item-container">
  <a class="mobile-item" href="index.html">Home</a>
</div>

      <button class="mobile-item" data-target="m-patch">Patch <span class="chev">â–¾</span></button>
<div class="mobile-sub" id="m-patch">
  <a href="patch.html#race">Race</a>
  <a href="patch.html#element">Element</a>
  <a href="patch.html#class">Class</a>
  <a href="patch.html#skills">Skills</a>
  <a href="patch.html#level">Level</a>
  <a href="patch.html#stats">Stats</a>
  <a href="patch.html#rank">Rank</a>
  <a href="patch.html#job">Job</a>
</div>

      <button class="mobile-item" data-target="m-roleplay">Roleplay <span class="chev">â–¾</span></button>
      <div class="mobile-sub" id="m-roleplay"><a href="#rpb">RPB</a><a href="#rpl">RPL</a><a href="#rpr">RPR</a></div>

      <button class="mobile-item" data-target="m-rules">Rules <span class="chev">â–¾</span></button>
      <div class="mobile-sub" id="m-rules"><a href="#rules-general">General Rules</a><a href="#rules-ooc">OOC Rules</a><a href="#rules-rpb">RPB Rules</a></div>

      <button class="mobile-item" data-target="m-guild">Guild <span class="chev">â–¾</span></button>
      <div class="mobile-sub" id="m-guild"><a href="#gon">GoN</a><a href="#zenith">Zenith</a><a href="#shadow">Shadow Garden</a><a href="#eclipse">Eclipse Luz</a></div>

      <button class="mobile-item" data-target="m-map">Map <span class="chev">â–¾</span></button>
      <div class="mobile-sub" id="m-map"><a href="#map-png">World Map (PNG)</a><a href="#map-download">Download .png</a></div>
    </nav>
  </div>

  <!-- CONTENT: hero + hooks -->
  <main>
    <section class="hero">
      <div class="hero-top">
        <div class="hero-left">
          <h1 class="hero-title">Stand upon the Ramparts. Shape a New Dawn.</h1>
          <p class="hero-sub">Aetherlyn â€” a realm of noble conflict and majestic adventure. Claim ranks, join guilds, and write history on the battlefields of fate.</p>

          <div class="hero-actions">
          <a href="https://chat.whatsapp.com/GhkuUozCaeTG4PCfFFXwSo?mode=ac_t" class="cta" id="joinBtn" target="_blank" rel="noopener noreferrer">Join the Realm</a>
            <button class="cta secondary" id="patchBtn">Read Patch Notes</button>
          </div>
        </div>

        <div style="min-width:240px;display:flex;flex-direction:column;gap:12px;align-items:flex-end">
          <div style="background:rgba(0,0,0,0.18);padding:12px;border-radius:8px;color:var(--parchment);font-weight:700">Next Event: Siege of Greymoor â€” Sep 14</div>
          <div style="background:linear-gradient(135deg,var(--gold),var(--blood-red));padding:8px 12px;border-radius:8px;color:var(--parchment);font-weight:800">New Class Preview: Bladewarden</div>
        </div>
      </div>

      <!-- Quick Patch Preview -->
      <div class="section">
        <h3>Latest Patch Highlights</h3>
        <div class="cards">
          <div class="card">
            <div class="meta">
              <div class="icon">R</div>
              <div>
                <h4>New Race: Aelwyn</h4>
                <p>Ancient wood-elves awakened with Aurora affinity and stealth bonuses.</p>
              </div>
            </div>
            <div style="margin-top:auto;text-align:right"><small style="color:var(--muted)">2 days ago</small></div>
          </div>

          <div class="card">
            <div class="meta">
              <div class="icon">S</div>
              <div>
                <h4>Skill: Spinal Cleave Buff</h4>
                <p>Royal Guillotine scales better with HP lost and grants temporary lifesteal.</p>
              </div>
            </div>
            <div style="margin-top:auto;text-align:right"><small style="color:var(--muted)">5 days ago</small></div>
          </div>

          <div class="card">
            <div class="meta">
              <div class="icon">E</div>
              <div>
                <h4>Event: Grand Quest</h4>
                <p>Bergabunglah ke Grand Quest of Aetherlyn! Tunjukkan kelayakan mu bermain RP dan menangkan hadiah terbatas.</p>
              </div>
            </div>
            <div style="margin-top:auto;text-align:right"><small style="color:var(--muted)">1 week ago</small></div>
          </div>
        </div>
      </div>

      <!-- Rules highlights -->
      <div class="section">
        <h3>Rules Highlights</h3>
        <div class="rules-grid">
          <div class="rule"><h5>General</h5><p>Dilarang RP berbau 18+, RP Over Tech.</p></div>
          <div class="rule"><h5>OOC</h5><p>Hindari terlalu banyak OOC di grup RP. OOC lah di grup yang disediakan</p></div>
          <div class="rule"><h5>RPB</h5><p>Menggunakan mekanik Turn-Base dalam battle.</p></div>
        </div>
        <div style="margin-top:12px;text-align:right"><a href="#rules-general" class="cta secondary">See All Rules</a></div>
      </div>

      <!-- Featured guilds -->
      <div class="section">
        <h3>Featured Guilds</h3>
        <div class="guilds">
          <div class="guild"><img src="gon-logo.jpg" alt="GoN"><h6>Guardians of Night</h6></div>
          <div class="guild"><img src="placeholder-guild.png" alt="Zenith"><h6>Zenith</h6></div>
          <div class="guild"><img src="placeholder-guild.png" alt="Shadow Garden"><h6>Shadow Garden</h6></div>
          <div class="guild"><img src="placeholder-guild.png" alt="Eclipse Luz"><h6>Eclipse Luz</h6></div>
        </div>
      </div>

      <!-- Map teaser -->
      <div class="section">
        <h3>World Map</h3>
        <div class="map-teaser">
          <a href="placeholder-map.png" target="_blank" rel="noreferrer"><img src="placeholder-map.png" alt="World Map"></a>
          <div class="map-overlay">Click to open full map (placeholder)</div>
        </div>
      </div>

    </section>

    <section id="about" class="card section" style="margin-top:18px">
      <h3>About the Realm</h3>
      <p class="muted">Aetherlyn adalah dunia Roleplay yang mengangkat tema Fantasy berlatar waktu Medieval (Abad pertengahan). Bergabunglah, tulis cerita mu di dunia yang penuh sihir dan misteri.</p>
    </section>

  </main>

  <footer>Â© World of Aetherlyn â€” Crafted with magic & pixels. â€¢ <a href="#" style="color:var(--muted)">Discord</a> â€¢ <a href="https://chat.whatsapp.com/GhkuUozCaeTG4PCfFFXwSo?mode=ac_t" style="color:var(--muted)">WhatsApp Comm</a></footer>

<script>
/* Lightweight particles (gold motes) */
(function(){
  const canvas = document.getElementById('particles-canvas');
  const ctx = canvas.getContext('2d');
  let W = canvas.width = innerWidth, H = canvas.height = innerHeight;
  let particles = [];
  const COUNT = Math.min(Math.max(Math.round(W/110), 10), 45);
  function rand(a,b){return Math.random()*(b-a)+a}
  function init(){particles=[]; for(let i=0;i<COUNT;i++){particles.push({x:rand(0,W), y:rand(0,H), r:rand(1.2,4), vx:rand(-0.12,0.12), vy:rand(-0.02,-0.45), alpha:rand(0.12,0.88), phase:rand(0,Math.PI*2), speed:rand(0.002,0.01)})}}
  function resize(){W=canvas.width=innerWidth; H=canvas.height=innerHeight; init()}
  addEventListener('resize', ()=>{clearTimeout(window._prt); window._prt=setTimeout(resize,160)})
  function draw(){
    ctx.clearRect(0,0,W,H);
    for(const p of particles){
      p.x+=p.vx; p.y+=p.vy; p.phase+=p.speed;
      const a = p.alpha * (0.6 + 0.4 * Math.sin(p.phase));
      if(p.x < -40) p.x = W + 40; if(p.x > W + 40) p.x = -40;
      if(p.y < -80) p.y = H + 60; if(p.y > H + 80) p.y = -80;
      const g = ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.r*6);
      g.addColorStop(0, `rgba(212,175,55,${0.95*a})`);
      g.addColorStop(0.3, `rgba(212,175,55,${0.35*a})`);
      g.addColorStop(1, `rgba(212,175,55,0)`);
      ctx.fillStyle = g; ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
    }
    requestAnimationFrame(draw);
  }
  init(); requestAnimationFrame(draw);
})();

/* Mobile overlay open/close & accordion */
(function(){
  const openBtn = document.getElementById('openOverlay');
  const closeBtn = document.getElementById('overlayClose');
  const overlay = document.getElementById('mobileOverlay');
  const body = document.body;
  function openOverlay(){ overlay.classList.add('show'); overlay.setAttribute('aria-hidden','false'); body.style.overflow='hidden'; }
  function closeOverlay(){ overlay.classList.remove('show'); overlay.setAttribute('aria-hidden','true'); body.style.overflow='auto'; }
  openBtn && openBtn.addEventListener('click', openOverlay);
  if(closeBtn) closeBtn.addEventListener('click', closeOverlay);

  document.querySelectorAll('.mobile-item').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const target = btn.getAttribute('data-target');
      const panel = document.getElementById(target);
      const isOpen = btn.classList.contains('open');
      document.querySelectorAll('.mobile-item').forEach(b=>b.classList.remove('open'));
      document.querySelectorAll('.mobile-sub').forEach(s=>s.style.display='none');
      if(!isOpen){ btn.classList.add('open'); if(panel) panel.style.display='flex'; }
    });
  });

  overlay.querySelectorAll('a').forEach(a=>a.addEventListener('click', ()=>{ closeOverlay(); }));
  document.addEventListener('keydown', e=>{ if(e.key==='Escape'){ if(overlay.classList.contains('show')) closeOverlay(); }});
})();

/* Improved dropdown behavior */
(function(){
  document.querySelectorAll('.nav-item').forEach(item => {
    item.addEventListener('mouseenter', () => {
      item.querySelector('.dropdown').style.display = 'block';
    });
    
    item.addEventListener('mouseleave', () => {
      item.querySelector('.dropdown').style.display = 'none';
    });
  });
})();

/* Small interactions required for quick buttons */
document.getElementById('patchBtn').addEventListener('click', ()=>{
  const el = document.querySelector('.section h3');
  if(el) el.scrollIntoView({behavior:'smooth',block:'center'});
});

/* Enhanced smooth scroll for cross-page navigation */
function handlePatchNavigation() {
  // Cek jika URL memiliki hash (contoh: patch.html#race)
  if(window.location.hash) {
    const hash = window.location.hash;
    const targetPage = window.location.pathname;
    
    // Jika kita sudah di halaman patch.html
    if(targetPage.includes('patch.html')) {
      smoothScrollTo(hash);
    }
  }
}

// Panggil fungsi saat halaman dimuat
document.addEventListener('DOMContentLoaded', handlePatchNavigation);

// Update tombol "Read Patch Notes" di homepage
document.getElementById('patchBtn').addEventListener('click', function(e) {
  e.preventDefault();
  window.location.href = 'patch.html';
});


// Enhanced Transition System with working dropdowns
document.addEventListener('DOMContentLoaded', function() {
  // Configuration
  const TRANSITION_CONFIG = {
    exitDuration: 600,
    overlayFade: 300,
    holdBeforeNavigate: 50
  };

  // Create transition element
  const transitionEl = document.createElement('div');
  transitionEl.className = 'transition-container';
  transitionEl.style.pointerEvents = 'none'; // Critical for dropdowns
  document.body.appendChild(transitionEl);

  // Function to handle navigation
  function handleNavigation(e) {
    const link = e.target.closest('a');
    
    // Skip special links
    if (!link || 
        link.target === '_blank' || 
        link.href.includes('#') || 
        link.href.startsWith('javascript:') ||
        link.closest('.dropdown')) {
      return;
    }
    
    e.preventDefault();
    
    // Start exit animation (excluding header)
    document.querySelectorAll('main, footer').forEach(el => {
      el.style.animation = `scrollClose ${TRANSITION_CONFIG.exitDuration}ms forwards`;
    });
    
    // Show transition overlay
    transitionEl.style.display = 'block';
    transitionEl.style.opacity = '1';
    transitionEl.style.transition = `opacity ${TRANSITION_CONFIG.overlayFade}ms ease`;
    
    // Navigate after animations complete
    setTimeout(() => {
      window.location.href = link.href;
    }, TRANSITION_CONFIG.exitDuration + TRANSITION_CONFIG.holdBeforeNavigate);
  }
  
  // Apply to all non-dropdown links
  document.querySelectorAll('a').forEach(link => {
    if (!link.closest('.dropdown')) {
      link.addEventListener('click', handleNavigation);
    }
  });
  
  // Hide transition on page load
  transitionEl.style.transition = `opacity ${TRANSITION_CONFIG.overlayFade}ms ease`;
  transitionEl.style.opacity = '0';
  setTimeout(() => {
    transitionEl.style.display = 'none';
  }, TRANSITION_CONFIG.overlayFade);
  
  // Enhanced dropdown behavior
  document.querySelectorAll('.nav-item').forEach(item => {
    const dropdown = item.querySelector('.dropdown');
    let dropdownTimer;
    
    item.addEventListener('mouseenter', () => {
      clearTimeout(dropdownTimer);
      dropdown.style.display = 'block';
    });
    
    item.addEventListener('mouseleave', () => {
      dropdownTimer = setTimeout(() => {
        dropdown.style.display = 'none';
      }, 200);
    });
    
    dropdown.addEventListener('mouseenter', () => {
      clearTimeout(dropdownTimer);
    });
    
    dropdown.addEventListener('mouseleave', () => {
      dropdownTimer = setTimeout(() => {
        dropdown.style.display = 'none';
      }, 200);
    });
  });
});
</script>   

</body>
</html>
