<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>World of Aetherlyn — Patch Notes</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;600;800&display=swap" rel="stylesheet">

<!-- modular CSS -->
<link rel="stylesheet" href="modules/theme.css">
<link rel="stylesheet" href="modules/layout.css">
<link rel="stylesheet" href="modules/navbar.css">
<link rel="stylesheet" href="modules/hero.css">
<link rel="stylesheet" href="modules/components.css">
<link rel="stylesheet" href="modules/mobile.css">
<link rel="stylesheet" href="modules/particles.css">
<link rel="stylesheet" href="modules/transition.css">
</head>

<style>
    #particles-canvas{position:fixed;inset:0;width:100%;height:100%;z-index:0;pointer-events:none}
  .hero-bg{
    position:fixed;inset:0;
    background-image:
      linear-gradient(180deg, rgba(9,6,3,0.15), rgba(9,6,3,0.35)),
      url('hero-img.png');
    background-size:cover;background-position:center;
    filter:contrast(0.98) saturate(0.98);
    transform:scale(1.01);
    z-index:1;
  }
  .hero-bg::after{content:'';position:absolute;inset:0;
    background:linear-gradient(180deg, rgba(255,240,220,0.03), rgba(0,0,0,0.28));}

  .patch-block {
  background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.92));
  padding: 20px;
  border-radius: 12px;
  margin-bottom: 24px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.06);
  border-left: 5px solid var(--gold); /* highlight kiri */
}

.patch-block h2 {
  font-family: 'Cinzel', serif;
  font-size: 20px;
  margin-bottom: 12px;
  color: var(--blood-red);
}

.patch-list {
  list-style: none;
  margin: 0;
  padding: 0;
}

.patch-list li {
  padding: 8px 0;
  line-height: 1.5;
  border-bottom: 1px solid rgba(58,44,26,0.06);
  color: var(--dark-brown);
}

.patch-list li:last-child {
  border-bottom: none;
}

.patch-list li {
  white-space: pre-line; /* bikin enter di HTML kebaca */
  padding: 8px 0;
  line-height: 1.6;
  border-bottom: 1px solid rgba(58,44,26,0.06);
}

 /* Tambahkan ini di bagian mobile CSS */
.mobile-item {
  background: transparent;
  padding: 14px;
  border-radius: 10px;
  font-weight: 800;
  font-size: 18px;
  border: 1px solid rgba(255,255,255,0.04);
  color: var(--parchment);
  text-decoration: none;
  text-align: left;
  display: block;
  width: 100%;
  transition: all 0.2s ease;
}

.mobile-item:hover {
  background: rgba(255,255,255,0.05);
  border-color: rgba(255,255,255,0.08);
}
/* Untuk item yang memiliki dropdown */
.mobile-item[data-target] {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* Style untuk highlight section */
.patch-block {
  transition: box-shadow 0.3s ease;
}

/* Style untuk mobile menu */
.mobile-sub a[href^="#"] {
  display: block;
  padding: 10px 0;
  color: var(--parchment);
  text-decoration: none;
}

.mobile-sub a[href^="#"]:hover {
  color: var(--gold);
}

  /* Responsive */
  @media(max-width:1000px){ .cards{grid-template-columns:repeat(2,1fr)} .guilds{grid-template-columns:repeat(2,1fr)} }
  @media(max-width:720px){
    .cards{grid-template-columns:1fr}
    .rules-grid{grid-template-columns:1fr}
    .nav-list{display:none}
    .hero{padding:60px 14px 30px}
    .hero-title{font-size:clamp(24px,8vw,38px)}
  }

  /* Sembunyiin burger di desktop */
@media (min-width: 721px) {
  #openOverlay {
    display: none !important;
  }
}

  @media (prefers-reduced-motion: reduce){*{transition:none!important;animation:none!important}}

html {
  scroll-behavior: smooth;
}

</style>
<body>

<canvas id="particles-canvas"></canvas>
<div class="hero-bg"></div>

<!-- Particles (subtle gold motes) -->
  <canvas id="particles-canvas" aria-hidden="true"></canvas>

  <!-- Hero background (dawn image) -->
  <div class="hero-bg" aria-hidden="true"></div>

  <!-- Header -->
  <header>
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden>
          <!-- simple heraldic svg -->
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none"><path d="M12 2L15.5 8H8.5L12 2Z" fill="white"/><path d="M5 9H19L12 22L5 9Z" fill="rgba(0,0,0,0.08)"/></svg>
        </div>
        <div>
          <a href="index.html" class="site-title">World of Aetherlyn</a>
          <div class="site-sub">Where Legends Rise and Kingdoms Fall</div>
        </div>
      </div>

      <div style="display:flex;align-items:center;gap:10px">
        <button id="openOverlay" class="menu-toggle" aria-label="Open menu" style="background:none;border:1px solid rgba(255,255,255,0.06);padding:10px;border-radius:8px;color:var(--parchment);font-size:18px">☰</button>
  
        <a href="https://chat.whatsapp.com/GhkuUozCaeTG4PCfFFXwSo?mode=ac_t" target="_blank" rel="noopener noreferrer" class="cta" id="enterBtn">Enter the Realm</a>
      </div>
    </div>

    <nav>
      <div class="nav-inner">
        <ul class="nav-list" id="navList">
          <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
          <li class="nav-item">
  <a class="nav-link" href="patch.html">Patch ▾</a>
  <ul class="dropdown">
    <li><a href="#race">Race</a></li>
    <li><a href="#element">Element</a></li>
    <li><a href="#class">Class</a></li>
    <li><a href="#skills">Skills</a></li>
    <li><a href="#level">Level</a></li>
    <li><a href="#stats">Stats</a></li>
    <li><a href="#rank">Rank</a></li>
    <li><a href="#job">Job</a></li>
  </ul>
</li>
          <li class="nav-item">
            <a class="nav-link">Roleplay ▾</a>
            <ul class="dropdown">
              <li><a href="#">RPB</a></li>
              <li><a href="#">RPL</a></li>
              <li><a href="#">RPR</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link">Rules ▾</a>
            <ul class="dropdown">
              <li><a href="#">General Rules</a></li>
              <li><a href="#">OOC Rules</a></li>
              <li><a href="#">RPB Rules</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link">Guild ▾</a>
            <ul class="dropdown">
              <li><a href="#">GoN</a></li>
              <li><a href="#">Zenith</a></li>
              <li><a href="#">Shadow Garden</a></li>
              <li><a href="#">Eclipse Luz</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link">Map ▾</a>
            <ul class="dropdown">
              <li><a href="#">World Map</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </nav>
  </header>

  <!-- Mobile overlay -->
  <div class="mobile-overlay" id="mobileOverlay" aria-hidden="true">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <div style="display:flex;align-items:center;gap:12px">
        <div class="logo" style="width:48px;height:48px"></div>
        <div>
          <div class="site-title" style="font-size:18px">World of Aetherlyn</div>
          <div class="site-sub">Where Legends Rise and Kingdoms Fall</div>
        </div>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <button id="overlayClose" class="cta" style="background:transparent;border:1px solid rgba(255,255,255,0.08);color:var(--parchment)">Close</button>
      </div>
    </div>

    <nav class="mobile-menu" aria-label="Mobile menu">
      <div class="mobile-item-container">
  <a class="mobile-item" href="index.html">Home</a>
</div>

      <!-- Update mobile menu -->
<button class="mobile-item" data-target="m-patch">Patch <span class="chev">▾</span></button>
<div class="mobile-sub" id="m-patch">
  <a href="#race">Race</a>
  <a href="#element">Element</a>
  <a href="#class">Class</a>
  <a href="#skills">Skills</a>
  <a href="#level">Level</a>
  <a href="#stats">Stats</a>
  <a href="#rank">Rank</a>
  <a href="#job">Job</a>
</div>

      <button class="mobile-item" data-target="m-roleplay">Roleplay <span class="chev">▾</span></button>
      <div class="mobile-sub" id="m-roleplay"><a href="#rpb">RPB</a><a href="#rpl">RPL</a><a href="#rpr">RPR</a></div>

      <button class="mobile-item" data-target="m-rules">Rules <span class="chev">▾</span></button>
      <div class="mobile-sub" id="m-rules"><a href="#rules-general">General Rules</a><a href="#rules-ooc">OOC Rules</a><a href="#rules-rpb">RPB Rules</a></div>

      <button class="mobile-item" data-target="m-guild">Guild <span class="chev">▾</span></button>
      <div class="mobile-sub" id="m-guild"><a href="#gon">GoN</a><a href="#zenith">Zenith</a><a href="#shadow">Shadow Garden</a><a href="#eclipse">Eclipse Luz</a></div>

      <button class="mobile-item" data-target="m-map">Map <span class="chev">▾</span></button>
      <div class="mobile-sub" id="m-map"><a href="#map-png">World Map (PNG)</a><a href="#map-download">Download .png</a></div>
    </nav>
  </div>



<main>
  <h1>Patch Notes 5.0</h1>

  <section id="race" class="patch-block">
    <h2>Race</h2>
    <ul class="patch-list">
      <h3>Ras dapat dipilih oleh petualang ketika pertama kali mendaftar. Setiap dari ras akan
memberikan bonus stats masing-masing, dan player hanya diperbolehkan untuk memilih satu
ras.</h3>
<li>
┊❏ Human
Manusia biasa, yang memiliki akal dan kemampuan untuk bersosialisasi. Mereka memiliki fisik
yang bervariasi dan mampu untuk menggunakan berbagai macam sihir.
↬ High Human (S)
↬ Human

┊❏ Elf
Elf memiliki fisik yang mirip dengan manusia namun mereka memiliki telinga panjang dan
runcing serta kecerdasan yang lebih tinggi dibandingkan manusia. Umumnya ras Elf memiliki
umur yang jauh lebih panjang dibandingkan manusia.
↬ Elf
↬ High Elf (S)
↬ Dark Elf  

┊❏ Dwarf
Dwarf adalah sebuah ras dengan ciri-ciri fisik yang sedikit lebih pendek serta badan yang kekar.
Mereka pada umumnya juga memiliki umur panjang dan ahli dalam penempaan.
↬ Elder Dwarf (A)
↬ Dwarf

┊❏ Demi-Human
Demi-Human adalah makhluk setengah manusia setengah hewan. Mereka dapat memiliki fisik
layaknya manusia namun juga memiliki kemampuan layaknya hewan masing-masing.
↬ Feline ( Ras Kucing )
↬ Canin ( Manusia Anjing )
↬ Lizardman
↬ Dragon
↬ Harpy
↬ Siren
↬ Mermaid
↬ Kitsune
↬ Arachne
↬ Werewolf
↬ Kraken
↬ Megalodon

┊❏ Kitsunee
-Unknown-

┊❏ Vampire
Vampire adalah sebuah ras yang memiliki kemampuan untuk mengendalikan darah. Mereka
umumnya memiliki kulit pucat, taring yang tajam, dan tidak bisa menua. Mereka juga umumnya
diberkati kemampuan regenerasi yang luar biasa.

┊❏ Angel
Angel adalah sebuah entitas suci dengan appearance yang sungguh memikat. Mereka memiliki
sayap dan dapat terbang, dan umumnya mereka begitu bijak. Namun, terkadang mereka bisa
jatuh dan menjadi 'Fallen Angel'.

┊❏ Demon
Demon adalah sebuah entitas yang terbentuk dari kejahatan dan kekejian. Mereka memiliki sifat
yang angkuh dan arogan, dan mereka cenderung menyukai kekerasan. Umumnya Demon
memiliki bentuk beragam yang mengeluarkan aura mengintimidasi, dan sebagian demon juga
dapat terbang karena memiliki sayap.

┊❏ Humanoid
Humanoid dapat diartikan sebagai 'manusia buatan'. Mereka memiliki karakteristik seperti
manusia dan bahkan dapat memiliki akal. Namun, mereka tetap bukanlah seorang manusia.
↬ Puppet
↬ Homunculus
      </li>
    </ul>
  </section>

  <section id="element" class="patch-block">
    <h2>Element - Water</h2>
    <ul class="patch-list">
        <h3>Tier 1</h3>
      <li>- water.
        - Blood (Exclusive Vampire).
        - Oil.
        - Bubble.
        - Ice.
        - Ink.
      </li>
        <h3>Tier 2 (Rank A Required)</h3>
        <li>- Corrosive Water.
        - Blizzard.
        - Crystal Ice.
        - Wave.
        - Mist.
        - Jelly.</li>
        <h3>Tier 3 (Rank S Required)</h3>
        <li>- Tsunami.
            - Soul seer Bubble.
            - Glacier.
            - Abyssal Ice.
        </li>
    </ul>
  </section>

  <section id="element" class="patch-block">
    <h2>Element - Fire</h2>
    <ul class="patch-list">
      <h3>Tier 1</h3>
      <li>- Fire.
      </li>
        <h3>Tier 2 (Rank A Required)</h3>
        <li>- Blue Fire.
        - Magma.
        - Blaze.
        - Explosion.
        </li>
        <h3>Tier 3 (Rank S Required)</h3>
        <li>- Ghost Flame.
            - Lava.
            - Inferno.
            - Hellfire.
        </li>
    </ul>
  </section>

  <section id="element" class="patch-block">
    <h2>Element - Wind</h2>
    <ul class="patch-list">
      <h3>Tier 1</h3>
      <li>- Wind.
        - Smoke.
        - Cyclone.
      </li>
        <h3>Tier 2 (Rank A Required)</h3>
        <li>- Mist.
        - Vortex.
        - Hurricane.
        </li>
        <h3>Tier 3 (Rank S Required)</h3>
        <li>- Galebreath.
            - Beliungposa.
            - Arch Tempered Wind.
            - Tornado.
        </li>
    </ul>
  </section>

  <section id="element" class="patch-block">
    <h2>Element - Lightning</h2>
    <ul class="patch-list">
      <h3>Tier 1</h3>
      <li>- Blitz.
        - Electric.
      </li>
        <h3>Tier 2 (Rank A Required)</h3>
        <li>- Divine Thunder.
        - Plasma.
        - Nebula Lightning.
        - Sound.
        </li>
        <h3>Tier 3 (Rank S Required)</h3>
        <li>- Holy Thunder.
            - Lightning Spectrum.
            - Electric Tempest.
        </li>
    </ul>
  </section>

  <section id="class" class="patch-block">
    <h2>Class</h2>
    <ul class="patch-list">
      <li>New class: Bladewarden.</li>
      <li>Assassin stealth duration reduced from 8s to 6s.</li>
    </ul>
  </section>

  <section id="skills" class="patch-block">
    <h2>Skills</h2>
    <ul class="patch-list">
        <h3>Skill yang akan dibuat harus disesuaikan dengan class, role, dan juga element dari karakter.</h3>
      <li>
● Character Traits : Merupakan kemampuan unik yang dimiliki oleh suatu karakter. Traits
juga dapat diartikan sebagai kemampuan khusus yang dimiliki karakter atau
kemampuan yang menjadi identitas karakter. Selain itu, traits juga dapat diartikan
sebagai kemampuan yang akan aktif jika karakter menghadapi kondisi tertentu.
● Normal Skill : Merupakan skill biasa pada umumnya.
● Special Skill : Merupakan skill yang memiliki dampak besar dalam pertarungan, yang
pada umumnya menjadi kartu as dari karakter.
</li>

<h3>Aturan Tambahan :</h3>
<li>● Untuk setiap skill yang dibuat jika terdapat damage maka diharuskan untuk
memasukkan scaling damage (dalam %STR). Buatlah damage yang masuk akal,
tidak berlebihan, dan sesuai dengan STR petualang.
● Tambahkan mana cost untuk setiap skill, durasi skill (jika ada), dan cooldown skill.
Diharuskan untuk menggunakan sistem turn (giliran) untuk skill yang didaftarkan di
dalam formulir.
● Jumlah serangan multi-hit memiliki sebuah batasan! Melakukan serangan lebih dari
sekali dalam satu gerakan akan mengurangi damage serangan tersebut sebesar 10%
dari damage original dan berlaku kelipatan untuk setiap tambahan serangan yang
dilakukan.
○ Warrior, Tank, Support : Max 5
○ Mage, Archer, Assassin : Max 8
</li>
<h3>Forbidden Skills</h3>
<li>
● Buatlah damage, buff / debuff, healing, mana regen, shield dalam bentuk persen (%)
agar jumlahnya terus meningkat seiring kenaikan stats.
● Terdapat beberapa jenis skill yang dilarang untuk digunakan, yaitu :
- Immortality
- Teleport / Warp in Battle
- Portal
- Nuclear
- Modern Technology
- Clone
- Rift / Multi-Dimensional
- Reality / Ignore Reality
- Fate Control / Manipulation
- Absolute Self / Godly
- Armageddon Type Skill
- Instant Execution Type Skill
</li>
<h3>Aturan Tambahan [2] :</h3>
<li>
● Cooldown skill (CD) dilarang lebih singkat dari durasi skill.
● Debuff tipe Crowd Control (CC) seperti stun, freeze, silence dilarang melebihi 1 turn.
● Perfect Parrying dilarang.
● Cooldown dihitung setelah durasi skill berakhir.
● Buff ataupun efek awakening dilarang melebihi 200%.
● Godmodding / Controlling Enemy dilarang (Terdapat pengecualian pada situasi tertentu).
● Dalam membuat skill, pastikan untuk memahami bagaimana karakter tersebut
melakukan skill tersebut.
</li>
    </ul>
  </section>

  <section id="level" class="patch-block">
    <h2>Level</h2>
    <ul class="patch-list">
      <li>Level cap increased from 60 to 65.</li>
    </ul>
  </section>

  <section id="stats" class="patch-block">
    <h2>Stats</h2>
    <ul class="patch-list">
      <li>AGI scaling improved for all races.</li>
    </ul>
  </section>

  <section id="rank" class="patch-block">
    <h2>Rank</h2>
    <ul class="patch-list">
      <h3>❏ List Rank Petualang dan level nya</h3>
<li>
↬ F: 0 - 49
↬ E: 50 - 99
↬ D: 100 - 149
↬ C: 150 - 199
↬ B: 200 - 259
↬ A: 260 - 319
↬ S: 320 - 389
↬ SS: 390 - 439
↬ SSL: 440 - 499
↬ SSK: 500 - Infinity
</li>
    </ul>
  </section>

  <section id="job" class="patch-block">
    <h2>Job</h2>
    <ul class="patch-list">
        <h3>Honored Profession</h3>
      <li>
        - Guildmaster.
        - Vice Guildmaster.
        - Military General.
      </li>
      <h3>Special Profession</h3>
      <li>- Pastor.
        - Alchemist.
        - Blacksmith.
        - ATU (Anomalus Termination Unit).
      </li>
      <h3>Reguler Profession</h3>
      <li>- Bartender.
        - Pelayan Bar.
        - Barista.
        - Koki.
        - Maid.
        - Butler.
        - Farmer.
        - Fisherman/woman.
        - Guard.
        - Business Owner.
        - Kuli.
      </li>
    </ul>
  </section>
</main>

<footer>© World of Aetherlyn — Patch Notes</footer>

<script>
// particles
(function(){
  const c = document.getElementById('particles-canvas'),x=c.getContext('2d');
  let W=c.width=innerWidth,H=c.height=innerHeight,p=[];
  function r(a,b){return Math.random()*(b-a)+a}
  function init(){p=[];for(let i=0;i<30;i++)p.push({x:r(0,W),y:r(0,H),r:r(1,3),vx:r(-.1,.1),vy:r(-.1,.1)})}
  function draw(){x.clearRect(0,0,W,H);for(let m of p){m.x+=m.vx;m.y+=m.vy;if(m.x<0)m.x=W;if(m.x>W)m.x=0;if(m.y<0)m.y=H;if(m.y>H)m.y=0;x.beginPath();x.arc(m.x,m.y,m.r,0,Math.PI*2);x.fillStyle='rgba(212,175,55,0.6)';x.fill()}requestAnimationFrame(draw)}
  addEventListener('resize',()=>{W=c.width=innerWidth;H=c.height=innerHeight;init()});
  init();draw();
})();

/* Mobile overlay open/close & accordion */
(function(){
  const openBtn = document.getElementById('openOverlay');
  const closeBtn = document.getElementById('overlayClose');
  const overlay = document.getElementById('mobileOverlay');
  const body = document.body;
  function openOverlay(){ overlay.classList.add('show'); overlay.setAttribute('aria-hidden','false'); body.style.overflow='hidden'; }
  function closeOverlay(){ overlay.classList.remove('show'); overlay.setAttribute('aria-hidden','true'); body.style.overflow='auto'; }
  openBtn && openBtn.addEventListener('click', openOverlay);
  if(closeBtn) closeBtn.addEventListener('click', closeOverlay);

  document.querySelectorAll('.mobile-item').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const target = btn.getAttribute('data-target');
      const panel = document.getElementById(target);
      const isOpen = btn.classList.contains('open');
      document.querySelectorAll('.mobile-item').forEach(b=>b.classList.remove('open'));
      document.querySelectorAll('.mobile-sub').forEach(s=>s.style.display='none');
      if(!isOpen){ btn.classList.add('open'); if(panel) panel.style.display='flex'; }
    });
  });

  overlay.querySelectorAll('a').forEach(a=>a.addEventListener('click', ()=>{ closeOverlay(); }));
  document.addEventListener('keydown', e=>{ if(e.key==='Escape'){ if(overlay.classList.contains('show')) closeOverlay(); }});
})();

/* Improved dropdown behavior */
(function(){
  document.querySelectorAll('.nav-item').forEach(item => {
    item.addEventListener('mouseenter', () => {
      item.querySelector('.dropdown').style.display = 'block';
    });
    
    item.addEventListener('mouseleave', () => {
      item.querySelector('.dropdown').style.display = 'none';
    });
  });
})();

/* Small interactions required for quick buttons */
document.getElementById('joinBtn').addEventListener('click', ()=>{ alert('Join flow placeholder — replace with Discord/Signup link.'); });
document.getElementById('patchBtn').addEventListener('click', ()=>{
  const el = document.querySelector('.section h3');
  if(el) el.scrollIntoView({behavior:'smooth',block:'center'});
});

/* Smooth scroll untuk dropdown patch */
document.querySelectorAll('.dropdown a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function(e) {
    e.preventDefault();
    
    const targetId = this.getAttribute('href');
    const targetElement = document.querySelector(targetId);
    
    if (targetElement) {
      // Tutup dropdown mobile jika terbuka
      document.getElementById('mobileOverlay').classList.remove('show');
      
      // Scroll ke element target
      targetElement.scrollIntoView({
        behavior: 'smooth',
        block: 'start'
      });
      
      // Tambahkan highlight sementara
      targetElement.style.boxShadow = '0 0 0 2px var(--gold)';
      setTimeout(() => {
        targetElement.style.boxShadow = 'none';
      }, 2000);
    }
  });
});

// Enhanced Transition System with working dropdowns
document.addEventListener('DOMContentLoaded', function() {
  // Configuration
  const TRANSITION_CONFIG = {
    exitDuration: 600,
    overlayFade: 300,
    holdBeforeNavigate: 50
  };

  // Create transition element
  const transitionEl = document.createElement('div');
  transitionEl.className = 'transition-container';
  transitionEl.style.pointerEvents = 'none'; // Critical for dropdowns
  document.body.appendChild(transitionEl);

  // Function to handle navigation
  function handleNavigation(e) {
    const link = e.target.closest('a');
    
    // Skip special links
    if (!link || 
        link.target === '_blank' || 
        link.href.includes('#') || 
        link.href.startsWith('javascript:') ||
        link.closest('.dropdown')) {
      return;
    }
    
    e.preventDefault();
    
    // Start exit animation (excluding header)
    document.querySelectorAll('main, footer').forEach(el => {
      el.style.animation = `scrollClose ${TRANSITION_CONFIG.exitDuration}ms forwards`;
    });
    
    // Show transition overlay
    transitionEl.style.display = 'block';
    transitionEl.style.opacity = '1';
    transitionEl.style.transition = `opacity ${TRANSITION_CONFIG.overlayFade}ms ease`;
    
    // Navigate after animations complete
    setTimeout(() => {
      window.location.href = link.href;
    }, TRANSITION_CONFIG.exitDuration + TRANSITION_CONFIG.holdBeforeNavigate);
  }
  
  // Apply to all non-dropdown links
  document.querySelectorAll('a').forEach(link => {
    if (!link.closest('.dropdown')) {
      link.addEventListener('click', handleNavigation);
    }
  });
  
  // Hide transition on page load
  transitionEl.style.transition = `opacity ${TRANSITION_CONFIG.overlayFade}ms ease`;
  transitionEl.style.opacity = '0';
  setTimeout(() => {
    transitionEl.style.display = 'none';
  }, TRANSITION_CONFIG.overlayFade);
  
  // Enhanced dropdown behavior
  document.querySelectorAll('.nav-item').forEach(item => {
    const dropdown = item.querySelector('.dropdown');
    let dropdownTimer;
    
    item.addEventListener('mouseenter', () => {
      clearTimeout(dropdownTimer);
      dropdown.style.display = 'block';
    });
    
    item.addEventListener('mouseleave', () => {
      dropdownTimer = setTimeout(() => {
        dropdown.style.display = 'none';
      }, 200);
    });
    
    dropdown.addEventListener('mouseenter', () => {
      clearTimeout(dropdownTimer);
    });
    
    dropdown.addEventListener('mouseleave', () => {
      dropdownTimer = setTimeout(() => {
        dropdown.style.display = 'none';
      }, 200);
    });
  });
});
</script>
</body>
</html>
